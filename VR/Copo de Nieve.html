<!DOCTYPE html> 
<html lang="en"> 
<head> 
    <title>Copo de Nieve</title>
</head>
<body>
    
<canvas id="myCanvas">
    <!--El elemento HTML canvas se puede utilizar para dibujar gr谩ficos a trav茅s de 
        secuencias de comandos (por lo general JavaScript ).-->
</canvas>

<!-- Aqu铆 va todo el c贸digo de three.js -->
<!-- script type="importmap" importa las librer铆as necesarias para three.js-->
<script type="importmap"> 
    {
        "imports":{
            "three": "./js/three.module.js",
            "three/OrbitControls": "./js/OrbitControls.js" 
        }
}
</script>
<script type="module"> 
//锔锔 Mandar llamar a la librer铆a
    import * as THREE from 'three'; 
    import {OrbitControls} from 'three/OrbitControls';
    console.log(OrbitControls);
    import{RoundedBoxGeometry} from './js/RoundedBoxGeometry.js';

//癸癸 Renderer - Realiza una conexi贸n entre el c贸digo y el canvas
    var renderer = new THREE.WebGLRenderer({
    canvas: document.getElementById('myCanvas'), antialias: true,
    });
    renderer.setPixelRatio(window.decivePixelRatio);
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setClearColor(0x70707C);

//  Creando nueva escena - Es el espacio donde se colocan los objetos
    var scene = new THREE.Scene();

//ヰ Agregar una c谩mara de perspectiva
    var camera = new THREE.PerspectiveCamera(70,window.innerWidth / window.innerHeight,0.1,2000
      );
    scene.add(camera);

    //Settings de la c谩mara
    camera.position.set(0, 40, 10);

    // A帽adiendo los OrbitControls
    var controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.05;

      var light = new THREE.DirectionalLight(0xFFFFFF, 1);
    light.castShadow = true;
    light.position.set(20, 30, 20); 
    light.target.position.set(0, 0, 0);
    scene.add(light.target);
    scene.add(light);
    renderer.shadowMap.enabled = true;

// Espacio para colocar los objetos

// Geometr铆a larga y delgada
var geometry1 = new THREE.CylinderGeometry(0.1, 0.1, 10);

// Material
var material1 = new THREE.MeshStandardMaterial({
  color: 0xffffff,
  transparent: true,
  opacity: 0.9
});

// Grupo
var copo = new THREE.Group();

// BRAZO 1
var brazo1 = new THREE.Group();

var pieza1 = new THREE.Mesh(geometry1, material1);
brazo1.add(pieza1);

var ramita1 = new THREE.Mesh(geometry1, material1);
ramita1.scale.set(1, 0.4, 1);
ramita1.rotation.set(0, 0, 0.6);
ramita1.position.set(0, 4, 0);
brazo1.add(ramita1);

copo.add(brazo1);


// BRAZO 2
var brazo2 = brazo1.clone();
brazo2.rotation.set(0, 0, 1.047);
copo.add(brazo2);


// BRAZO 3
var brazo3 = brazo1.clone();
brazo3.rotation.set(0, 0, 2.094);
copo.add(brazo3);


// BRAZO 4
var brazo4 = brazo1.clone();
brazo4.rotation.set(0, 0, 3.142);
copo.add(brazo4);


// BRAZO 5
var brazo5 = brazo1.clone();
brazo5.rotation.set(0, 0, 4.189);
copo.add(brazo5);


// BRAZO 6
var brazo6 = brazo1.clone();
brazo6.rotation.set(0, 0, 5.236);
copo.add(brazo6);


// Agregar a escena
scene.add(copo);
copo.position.set(0, 0, 0);
//梆Rendering y animaci贸n
    requestAnimationFrame(render);
    function render() {

    // Animaci贸n - 

    //Actualizaci贸n del OrbitControls para generar la suavidad de movimiento
    controls.update();

    //Llamado para renderizar y volver a llamar a la misma funci贸n (render)
    renderer.render(scene, camera);
    requestAnimationFrame(render);
    }
</script>
</body>
</html>